<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíù My Valentine üíù</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        html, body {
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ffe4ec 0%, #ffc2d1 50%, #ffb3c6 100%);
        }

        .dancing { font-family: 'Dancing Script', cursive; }

        /* Background */
        .floating-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
        }

        .bg-heart {
            position: absolute;
            font-size: 1.5rem;
            opacity: 0.4;
            animation: floatUp 8s linear infinite;
            pointer-events: none;
        }

        @keyframes floatUp {
            0% { transform: translateY(100vh) rotate(0deg) scale(0.5); opacity: 0; }
            10% { opacity: 0.4; }
            90% { opacity: 0.4; }
            100% { transform: translateY(-100vh) rotate(360deg) scale(1.2); opacity: 0; }
        }

        /* Steps - FIXED TRANSITION */
        .step {
            position: absolute;
            inset: 0;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
            pointer-events: none;
        }

        .step.active {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
            animation: stepIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes stepIn {
            0% { transform: scale(0.8) translateY(50px); opacity: 0; }
            100% { transform: scale(1) translateY(0); opacity: 1; }
        }

        /* Glass Card */
        .glass-card {
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 2px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 8px 32px rgba(255, 105, 180, 0.2);
        }

        /* YES Button */
        .btn-yes {
            background: linear-gradient(135deg, #ff1744 0%, #ff4081 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-weight: 800;
            font-size: 1.4rem;
            padding: 20px 50px;
            min-height: 75px;
            min-width: 220px;
            box-shadow: 0 8px 25px rgba(255, 23, 68, 0.5);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: pulse 2s infinite;
            touch-action: manipulation;
            z-index: 20;
            cursor: pointer;
        }

        .btn-yes:active { transform: scale(0.95); }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 23, 68, 0.6); transform: scale(1); }
            50% { box-shadow: 0 0 40px rgba(255, 23, 68, 0.9); transform: scale(1.08); }
        }

        /* NO Button */
        .btn-no {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1.3rem;
            padding: 18px 45px;
            min-height: 70px;
            min-width: 200px;
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
            transition: all 0.3s ease;
            position: relative;
            touch-action: manipulation;
            z-index: 20;
            cursor: pointer;
        }

        .btn-no.thinking {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            animation: shake 0.5s ease;
        }

        .btn-no.running {
            position: absolute !important;
            background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
            font-size: 1rem;
            padding: 12px 25px;
            min-height: 50px;
            min-width: 120px;
            z-index: 50;
            transition: all 0.2s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-3deg); }
            75% { transform: translateX(10px) rotate(3deg); }
        }

        /* Warning Box */
        .warning-box {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%) scale(0);
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 3px solid #f59e0b;
            border-radius: 20px;
            padding: 20px 30px;
            text-align: center;
            z-index: 100;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 90%;
            width: 350px;
        }

        .warning-box.show { transform: translateX(-50%) scale(1); }

        .warning-icon { font-size: 3rem; margin-bottom: 10px; }
        .warning-text { font-size: 1.2rem; color: #92400e; font-weight: 600; margin-bottom: 15px; }
        .warning-btn {
            background: #f59e0b;
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
        }

        /* Heart Burst */
        .heart-burst {
            position: absolute;
            font-size: 2rem;
            pointer-events: none;
            animation: burst 1s ease-out forwards;
            z-index: 100;
        }

        @keyframes burst {
            0% { transform: translate(0, 0) scale(0) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(1.5) rotate(360deg); opacity: 0; }
        }

        /* Big Heart */
        .big-heart {
            font-size: 10rem;
            animation: heartbeat 1.2s ease-in-out infinite, rainbow 4s linear infinite;
            filter: drop-shadow(0 0 40px rgba(255, 23, 68, 0.6));
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.15); }
            50% { transform: scale(1); }
            75% { transform: scale(1.2); }
        }

        @keyframes rainbow {
            0% { filter: hue-rotate(0deg) drop-shadow(0 0 40px rgba(255, 23, 68, 0.6)); }
            100% { filter: hue-rotate(360deg) drop-shadow(0 0 40px rgba(255, 23, 68, 0.6)); }
        }

        /* Teddy */
        .teddy {
            font-size: 6rem;
            animation: teddyBounce 2s ease-in-out infinite;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.1));
        }

        @keyframes teddyBounce {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        /* Love Bar */
        .love-bar {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .love-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b9d, #ff1744);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
            animation: shimmer 2s linear infinite;
            background-size: 200% 100%;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Confetti */
        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 2px;
            animation: confettiFall 3s linear forwards;
            pointer-events: none;
        }

        @keyframes confettiFall {
            0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* Touch Ripple */
        .touch-ripple {
            position: absolute;
            width: 60px;
            height: 60px;
            border: 3px solid rgba(255,255,255,0.8);
            border-radius: 50%;
            transform: translate(-50%, -50%) scale(0);
            animation: ripple 0.6s ease-out forwards;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes ripple {
            to { transform: translate(-50%, -50%) scale(4); opacity: 0; }
        }

        /* Typewriter */
        .type-text::after {
            content: '|';
            animation: blink 1s infinite;
            color: #ff1744;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* Sparkles */
        .sparkle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px white;
            animation: sparkleAnim 1s linear forwards;
            pointer-events: none;
        }

        @keyframes sparkleAnim {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            100% { transform: scale(3) rotate(180deg); opacity: 0; }
        }

        /* Hint */
        .hint-text {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ec4899;
            font-size: 0.9rem;
            text-align: center;
            opacity: 0.8;
            width: 100%;
        }

        .run-hint {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.9);
            padding: 10px 15px;
            border-radius: 20px;
            color: #ef4444;
            font-weight: 600;
            font-size: 0.9rem;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 200;
        }

        .run-hint.show { opacity: 1; animation: bounce 1s infinite; }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @media (max-width: 640px) {
            .btn-yes { font-size: 1.2rem; padding: 18px 40px; min-height: 70px; min-width: 200px; }
            .btn-no { font-size: 1.1rem; padding: 16px 35px; min-height: 65px; min-width: 180px; }
            .btn-no.running { font-size: 0.9rem; padding: 10px 20px; min-height: 45px; min-width: 100px; }
            .big-heart { font-size: 8rem; }
            .teddy { font-size: 5rem; }
            .glass-card { margin: 0 10px; padding: 1.5rem; }
        }

        .btn-area {
            min-height: 200px;
        }

        .btn-yes {
            min-height: 60px;
            font-size: 1.1rem;
            animation: none;
        }

        .btn-hidden {
            animation: none;
        }

        .btn-gradient {
            background: linear-gradient(135deg, #ff1744, #ff6b6b, #e91e63);
        }

        .animate-bounce {
            animation-delay: 0.1s;
        }

        .animate-bounce:nth-child(2) {
            animation-delay: 0.2s;
        }

        .animate-bounce:nth-child(3) {
            animation-delay: 0.3s;
        }

        .animate-bounce:nth-child(4) {
            animation-delay: 0.4s;
        }

        .backdrop-filter {
            -webkit-backdrop-filter: blur(12px);
            backdrop-filter: blur(12px);
        }
    </style>
</head>
<body>

    <!-- Background -->
    <div class="floating-bg" id="bgContainer"></div>

    <!-- Warnings -->
    <div id="warningContainer"></div>
    <div class="run-hint" id="runHint">üèÉ Pakad ke dikhao! üòÇ</div>

    <!-- STEP 1: Initial Question -->
    <div id="step1" class="step active p-4">
        <div class="glass-card rounded-3xl p-6 w-full max-w-md mx-4 relative">
            <div class="text-center mb-6">
                <div class="teddy mb-2">üß∏</div>
                <h1 class="dancing text-3xl md:text-4xl text-pink-700 font-bold mb-2">Hey Beautiful! üíï</h1>
                <p class="text-gray-700 text-lg">Kya tum mujhse...</p>
            </div>

            <div class="text-center mb-8">
                <div class="dancing text-3xl md:text-4xl text-pink-600 font-bold mb-2">Valentine Bano Gi? üåπ</div>
                <p class="text-pink-500 text-sm mt-2">Soch samajh ke jawab dena! üòè</p>
            </div>

            <div class="flex flex-col gap-4 items-center relative btn-area" id="btnArea">
                <button id="noBtn" onclick="handleNoClick()" class="btn-no w-full max-w-xs">NO üôÖ‚Äç‚ôÄÔ∏è</button>
                <button onclick="handleYes()" class="btn-yes w-full max-w-xs">YES! üíñ</button>
            </div>

            <div class="hint-text">
                üí° <span id="hintText">Dono options available hain... socho!</span>
            </div>
        </div>
    </div>

    <!-- STEP 2: Love Meter Celebration -->
    <div id="step2" class="step p-4">
        <div class="glass-card rounded-3xl p-6 w-full max-w-lg mx-4 text-center">
            <div id="heartZone" class="h-24 flex items-center justify-center mb-4">
                <span class="text-6xl animate-bounce">üíù</span>
            </div>

            <h2 class="dancing text-3xl md:text-4xl text-pink-700 font-bold mb-3">Yay! You Said YES! üéâ</h2>
            <p class="text-gray-700 mb-4">Tumne mera dil khush kar diya! üíó</p>

            <div class="love-bar mb-2">
                <div id="loveFill" class="love-fill"></div>
            </div>
            <p class="text-pink-600 font-bold mb-4">Love Meter: <span id="lovePercent">0</span>% ‚ù§Ô∏è</p>

            <button onclick="fillLove()" class="btn-yes mb-4 w-full">
                Fill My Heart! üíï
            </button>

            <button onclick="goStep(3)" id="nextBtn2" class="hidden w-full max-w-xs mx-auto bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 rounded-2xl font-bold text-lg shadow-lg">
                Continue ‚Üí
            </button>
        </div>
    </div>

    <!-- STEP 3: Cute Question 1 -->
    <div id="step3" class="step p-4">
        <div class="glass-card rounded-3xl p-6 w-full max-w-md mx-4 text-center">
            <div class="text-5xl mb-4 animate-pulse">üå∏</div>
            <h2 class="dancing text-3xl text-pink-700 font-bold mb-4">Sawal #1 ü§î</h2>
            <p class="text-gray-700 mb-6 text-lg">Mere liye tum kitna cute feel karti ho?</p>

            <div class="space-y-3">
                <button onclick="cuteAnswer(1, this)" class="w-full bg-gradient-to-r from-blue-200 to-blue-300 text-blue-800 py-4 rounded-2xl font-semibold text-lg shadow-md active:scale-95 transition">
                    üòä Thoda sa cute
                </button>
                <button onclick="cuteAnswer(2, this)" class="w-full bg-gradient-to-r from-pink-200 to-pink-300 text-pink-800 py-4 rounded-2xl font-semibold text-lg shadow-md active:scale-95 transition">
                    ü•∞ Bahut zyada cute
                </button>
                <button onclick="cuteAnswer(3, this)" class="w-full bg-gradient-to-r from-red-300 to-pink-400 text-white py-4 rounded-2xl font-semibold text-lg shadow-md active:scale-95 transition">
                    üòç Cute hi nahi, MERA ho tum!
                </button>
            </div>

            <div id="cuteMsg" class="hidden mt-4 p-4 bg-pink-100 rounded-2xl text-pink-800 font-bold text-lg border-2 border-pink-300 animate-pulse"></div>

            <button onclick="goStep(4)" id="nextBtn3" class="hidden mt-6 btn-yes btn-hidden">
                Next Question üí´
            </button>
        </div>
    </div>

    <!-- STEP 4: Cute Question 2 -->
    <div id="step4" class="step p-4">
        <div class="glass-card rounded-3xl p-6 w-full max-w-md mx-4 text-center">
            <div class="text-5xl mb-4 animate-pulse">üí≠</div>
            <h2 class="dancing text-3xl text-pink-700 font-bold mb-4">Sawal #2 üíï</h2>
            <p class="text-gray-700 mb-6 text-lg">Mere bina tumhara din kaisa hota hai?</p>

            <div class="space-y-3">
                <button onclick="dayAnswer(1, this)" class="w-full bg-gradient-to-r from-gray-200 to-gray-300 text-gray-700 py-4 rounded-2xl font-semibold text-lg shadow-md active:scale-95 transition">
                    üòê Normal hi hota hai
                </button>
                <button onclick="dayAnswer(2, this)" class="w-full bg-gradient-to-r from-yellow-200 to-orange-200 text-orange-800 py-4 rounded-2xl font-semibold text-lg shadow-md active:scale-95 transition">
                    üòä Accha hota hai
                </button>
                <button onclick="dayAnswer(3, this)" class="w-full bg-gradient-to-r from-pink-300 to-rose-400 text-white py-4 rounded-2xl font-semibold text-lg shadow-md active:scale-95 transition">
                    üòç Incomplete without you!
                </button>
            </div>

            <div id="dayMsg" class="hidden mt-4 p-4 bg-rose-100 rounded-2xl text-rose-800 font-bold text-lg border-2 border-rose-300 animate-pulse"></div>

            <button onclick="goStep(5)" id="nextBtn4" class="hidden mt-6 btn-yes btn-hidden">
                Final Step üíå
            </button>
        </div>
    </div>

    <!-- STEP 5: Final I Love You -->
    <div id="step5" class="step p-4">
        <div class="glass-card rounded-3xl p-6 w-full max-w-md mx-4 text-center">
            <div class="text-6xl mb-4 animate-bounce">üíå</div>
            <h2 class="dancing text-3xl text-pink-700 font-bold mb-4">Final Moment! üíù</h2>
            <p class="text-gray-700 mb-8 text-lg type-text min-h-[3rem]" id="typeText"></p>

            <div class="flex flex-col gap-4">
                <button onclick="goStep(6)" class="btn-yes w-full text-xl py-5 btn-gradient">
                    I LOVE YOU ‚ù§Ô∏èüíê
                </button>
                
                <button id="noBtn2" onclick="finalNoClick()" class="btn-no relative mx-auto">
                    Nahi üòù
                </button>
            </div>
        </div>
    </div>

    <!-- STEP 6: Grand Finale -->
    <div id="step6" class="step flex-col p-4 bg-gradient-to-br from-pink-200 via-rose-100 to-purple-200">
        <div class="text-center">
            <div class="big-heart mb-2">‚ù§Ô∏è</div>
            <h1 class="dancing text-4xl md:text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-600 to-purple-600 font-bold mb-2">
                I Love You Too!
            </h1>
            <p class="text-xl text-pink-700 mb-4 dancing">Tum meri Valentine ho! üíï</p>

            <div class="flex justify-center gap-3 text-4xl mb-6 flex-wrap">
                <span class="animate-bounce">üåπ</span>
                <span class="animate-bounce" style="animation-delay: 0.1s">üíù</span>
                <span class="animate-bounce" style="animation-delay: 0.2s">üß∏</span>
                <span class="animate-bounce" style="animation-delay: 0.3s">üíê</span>
                <span class="animate-bounce" style="animation-delay: 0.4s">‚ù§Ô∏è</span>
            </div>

            <button onclick="grandFinale()" class="btn-yes text-lg py-4 px-8 btn-hidden">
                üéâ Celebrate Love! üíï
            </button>
            
            <p class="text-pink-600 text-sm mt-4">Happy Valentine's Day My Love! üíó</p>
        </div>
        <div id="confettiZone" class="absolute inset-0 pointer-events-none"></div>
    </div>

    <script>
        // Prevent zoom
        document.addEventListener('touchmove', e => { if (e.scale !== 1) e.preventDefault(); }, { passive: false });
        document.addEventListener('gesturestart', e => e.preventDefault());

        // Touch ripple
        document.addEventListener('touchstart', e => {
            const touch = e.touches[0];
            const ripple = document.createElement('div');
            ripple.className = 'touch-ripple';
            ripple.style.left = touch.clientX + 'px';
            ripple.style.top = touch.clientY + 'px';
            document.body.appendChild(ripple);
            setTimeout(() => ripple.remove(), 600);
        });

        // Background hearts
        function createBgHearts() {
            const container = document.getElementById('bgContainer');
            const hearts = ['üíï', 'üíñ', 'üíó', 'üíì', 'üíù'];
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'bg-heart';
                heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 4 + 6) + 's';
                container.appendChild(heart);
                setTimeout(() => heart.remove(), 8000);
            }, 400);
        }
        createBgHearts();

        // Warnings
        const warnings = [
            { icon: '‚ö†Ô∏è', text: 'Ruko zara! Sabar karo! ü§ö', subtext: 'Soch lo, achha option hai!' },
            { icon: 'ü§î', text: 'Pakka? Soch lo! üí≠', subtext: 'Itni jaldi kya hai?' },
            { icon: 'üòè', text: 'Mere se panga logi? üî•', subtext: 'Last chance hai...' },
            { icon: 'üèÉ', text: 'Ab bhagao! Pakad ke dikhao! üòÇ', subtext: 'NO button ab bhaagega!' }
        ];

        let noClickCount = 0;
        let noBtnRunning = false;

        // Handle NO clicks
        function handleNoClick() {
            if (noBtnRunning) return;
            
            const btn = document.getElementById('noBtn');
            
            if (noClickCount < 3) {
                showWarning(warnings[noClickCount]);
                noClickCount++;
                
                const texts = ['ü§î Socho...', 'üòè Pakka?', 'üèÉ Bhag!'];
                btn.innerHTML = texts[noClickCount-1];
                btn.classList.add('thinking');
                
                setTimeout(() => {
                    btn.innerHTML = 'NO üôÖ‚Äç‚ôÄÔ∏è';
                    btn.classList.remove('thinking');
                }, 1500);
            } else {
                startNoButtonRun();
            }
        }

        function showWarning(data) {
            const container = document.getElementById('warningContainer');
            const box = document.createElement('div');
            box.className = 'warning-box';
            box.innerHTML = `
                <div class="warning-icon">${data.icon}</div>
                <div class="warning-text">${data.text}</div>
                <div class="text-sm text-amber-700 mb-3">${data.subtext}</div>
                <button onclick="this.parentElement.remove()" class="warning-btn">Theek hai üòÖ</button>
            `;
            container.appendChild(box);
            setTimeout(() => box.classList.add('show'), 10);
            setTimeout(() => {
                box.classList.remove('show');
                setTimeout(() => box.remove(), 400);
            }, 3000);
        }

        // Start running NO button
        function startNoButtonRun() {
            noBtnRunning = true;
            const btn = document.getElementById('noBtn');
            const area = document.getElementById('btnArea');
            
            btn.classList.add('running');
            btn.innerHTML = 'NO! üò±';
            
            document.getElementById('runHint').classList.add('show');
            document.getElementById('hintText').innerHTML = 'Ab NO button bhaag raha hai! YES dabao! üòÇ';
            
            area.style.position = 'relative';
            
            let pos = { x: 0, y: 0 };
            let vel = { x: 3, y: 2 };
            
            function animate() {
                if (!noBtnRunning) return;
                
                const rect = area.getBoundingClientRect();
                const maxX = rect.width - 120;
                const maxY = rect.height - 60;
                
                pos.x += vel.x;
                pos.y += vel.y;
                
                if (pos.x <= 0 || pos.x >= maxX) vel.x *= -1;
                if (pos.y <= 0 || pos.y >= maxY) vel.y *= -1;
                
                if (Math.random() < 0.03) {
                    vel.x = (Math.random() - 0.5) * 8;
                    vel.y = (Math.random() - 0.5) * 8;
                }
                
                btn.style.left = pos.x + 'px';
                btn.style.top = pos.y + 'px';
                
                if (Math.random() < 0.05) {
                    const texts = ['Pakad! üòù', 'Miss! üôà', 'Yahan! üèÉ', 'Nope! ‚úã', 'Try! üòÇ', 'Fast! ‚ö°'];
                    btn.innerHTML = texts[Math.floor(Math.random() * texts.length)];
                }
                
                requestAnimationFrame(animate);
            }
            animate();
            
            btn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                vel.x = (Math.random() - 0.5) * 12;
                vel.y = (Math.random() - 0.5) * 12;
                pos.x = Math.random() * (area.offsetWidth - 100);
                pos.y = Math.random() * (area.offsetHeight - 50);
            });
        }

        // Handle YES
        function handleYes() {
            createHeartBurst(window.innerWidth/2, window.innerHeight/2);
            goStep(2);
        }

        // Heart burst
        function createHeartBurst(x, y) {
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'heart-burst';
                    heart.innerHTML = ['‚ù§Ô∏è', 'üíñ', 'üíï', 'üíó'][Math.floor(Math.random() * 4)];
                    heart.style.left = x + 'px';
                    heart.style.top = y + 'px';
                    const angle = (Math.PI * 2 * i) / 15;
                    const dist = 100 + Math.random() * 100;
                    heart.style.setProperty('--tx', Math.cos(angle) * dist + 'px');
                    heart.style.setProperty('--ty', Math.sin(angle) * dist + 'px');
                    document.body.appendChild(heart);
                    setTimeout(() => heart.remove(), 1000);
                }, i * 50);
            }
        }

        // FIXED Navigation - Simple and Reliable
        function goStep(n) {
            // Hide all steps
            document.querySelectorAll('.step').forEach(s => {
                s.classList.remove('active');
            });
            
            // Show target step
            const target = document.getElementById('step' + n);
            if (target) {
                target.classList.add('active');
            }

            // Step specific actions
            if (n === 2) {
                setTimeout(() => {
                    const btn = document.getElementById('nextBtn2');
                    if (btn) btn.classList.remove('hidden');
                }, 2000);
            }
            
            if (n === 5) {
                setTimeout(typeWriter, 300);
            }
            
            if (n === 6) {
                startConfetti();
            }
        }

        // Love meter
        function fillLove() {
            let percent = 0;
            const fill = document.getElementById('loveFill');
            const text = document.getElementById('lovePercent');
            
            const interval = setInterval(() => {
                percent += 3;
                fill.style.width = percent + '%';
                text.innerText = percent;
                
                if (percent % 15 === 0) {
                    const rect = document.getElementById('heartZone').getBoundingClientRect();
                    createHeartBurst(rect.left + rect.width/2, rect.top + rect.height/2);
                }
                
                if (percent >= 100) {
                    clearInterval(interval);
                    setTimeout(() => alert('üíù Dil bhar gaya! üíù'), 300);
                }
            }, 80);
        }

        // Cute answer 1
        function cuteAnswer(n, btn) {
            const msgs = [
                "Thoda sa? Main tumhara poora dun! üíï",
                "Bahut zyada? Tum meri jaan ho! ü•∞",
                "Wah! Yeh hui na baat! Tum sirf meri ho! üòç‚ù§Ô∏è"
            ];
            
            btn.style.transform = 'scale(1.05)';
            setTimeout(() => btn.style.transform = 'scale(1)', 200);
            
            document.getElementById('cuteMsg').innerHTML = msgs[n-1];
            document.getElementById('cuteMsg').classList.remove('hidden');
            document.getElementById('nextBtn3').classList.remove('hidden');
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const spark = document.createElement('div');
                    spark.className = 'sparkle';
                    spark.style.left = (Math.random() * window.innerWidth) + 'px';
                    spark.style.top = (Math.random() * window.innerHeight) + 'px';
                    document.body.appendChild(spark);
                    setTimeout(() => spark.remove(), 1000);
                }, i * 100);
            }
        }

        // Day answer
        function dayAnswer(n, btn) {
            const msgs = [
                "Normal? Ab main tumhari life special bana dunga! üòä",
                "Accha? Main tumhe best feel karwaunga! ü•∞",
                "Wah! Tum bhi mere bina adhuri lagti ho! üòç‚ù§Ô∏è"
            ];
            
            btn.style.transform = 'scale(1.05)';
            setTimeout(() => btn.style.transform = 'scale(1)', 200);
            
            document.getElementById('dayMsg').innerHTML = msgs[n-1];
            document.getElementById('dayMsg').classList.remove('hidden');
            document.getElementById('nextBtn4').classList.remove('hidden');
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const spark = document.createElement('div');
                    spark.className = 'sparkle';
                    spark.style.left = (Math.random() * window.innerWidth) + 'px';
                    spark.style.top = (Math.random() * window.innerHeight) + 'px';
                    document.body.appendChild(spark);
                    setTimeout(() => spark.remove(), 1000);
                }, i * 100);
            }
        }

        // Typewriter
        function typeWriter() {
            const text = "Kya tum mujhse forever ke liye pyaar karogi? üíï";
            const el = document.getElementById('typeText');
            if (!el) return;
            el.innerHTML = '';
            let i = 0;
            const type = setInterval(() => {
                if (i < text.length) {
                    el.innerHTML += text.charAt(i);
                    i++;
                } else clearInterval(type);
            }, 60);
        }

        // Final NO button wiggle
        function finalNoClick() {
            const btn = document.getElementById('noBtn2');
            btn.style.transform = `translate(${Math.random()*100-50}px, ${Math.random()*50-25}px) rotate(${Math.random()*20-10}deg)`;
            btn.innerHTML = ['Nahi! üò§', 'Yes bolo! ü•∫', 'Love me! üíï', 'Pakad! üòù'][Math.floor(Math.random()*4)];
            setTimeout(() => {
                btn.style.transform = 'translate(0,0)';
            }, 500);
        }

        // Confetti
        function startConfetti() {
            const colors = ['#ff1744', '#ff6b9d', '#ffcce6', '#ffeb3b', '#e91e63'];
            const zone = document.getElementById('confettiZone');
            
            setInterval(() => {
                for (let i = 0; i < 3; i++) {
                    const conf = document.createElement('div');
                    conf.className = 'confetti';
                    conf.style.left = Math.random() * 100 + 'vw';
                    conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    conf.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    zone.appendChild(conf);
                    setTimeout(() => conf.remove(), 4000);
                }
            }, 300);
        }

        // Grand finale
        function grandFinale() {
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.innerHTML = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíù'][Math.floor(Math.random() * 5)];
                    heart.style.position = 'absolute';
                    heart.style.left = '50%';
                    heart.style.top = '50%';
                    heart.style.fontSize = '3rem';
                    heart.style.pointerEvents = 'none';
                    heart.style.zIndex = '9999';
                    heart.style.animation = `burst 1.5s ease-out forwards`;
                    const angle = (i / 30) * Math.PI * 2;
                    const dist = 200 + Math.random() * 200;
                    heart.style.setProperty('--tx', Math.cos(angle) * dist + 'px');
                    heart.style.setProperty('--ty', Math.sin(angle) * dist + 'px');
                    document.body.appendChild(heart);
                    setTimeout(() => heart.remove(), 1500);
                }, i * 40);
            }
            
            setTimeout(() => {
                alert('üíù Happy Valentine\'s Day! üíù\nTum meri ho, main tumhara! ‚ù§Ô∏è\n\nI Love You! üíïüíïüíï');
            }, 1000);
        }
    </script>
</body>
</html>